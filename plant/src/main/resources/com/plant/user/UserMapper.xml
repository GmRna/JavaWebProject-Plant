<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.plant.user.UserMapper">

	<insert id="insert" parameterType="com.plant.user.UserVO">
		INSERT INTO user (
			user_nick, user_id, user_pwd, user_email, user_name, user_regnum, user_postcode, user_addr1, user_addr2, user_hp, user_plantname, user_planttype, user_plantfile_org, user_plantfile_real, user_favrplant, user_open
		) VALUES (
			#{user_nick}, #{user_id}, #{user_pwd}, #{user_email}, #{user_name}, #{user_regnum}, #{user_postcode}, #{user_addr1}, #{user_addr2}, #{user_hp}, #{user_plantname}, #{user_planttype}, #{user_plantfile_org}, #{user_plantfile_real}, #{user_favrplant}, #{user_open}
		)
	</insert>
	
	<select id="emailDupCheck" parameterType="string" resultType="int">
		SELECT COUNT(*) FROM user WHERE user_id = #{user_id}
	</select>
	
	<select id="loginCheck" parameterType="com.plant.user.UserVO" resultType="com.plant.user.UserVO">
		SELECT * FROM user WHERE user_id = #{user_id} AND user_pwd = #{user_pwd}
	</select>
	
	<select id="findEmail" parameterType="com.plant.user.UserVO" resultType="com.plant.user.UserVO">
		SELECT user_id FROM user WHERE user_name=#{user_name} AND user_hp=#{user_hp}  
	</select>
	
	<select id="findPwd" parameterType="com.plant.user.UserVO" resultType="com.plant.user.UserVO">
		SELECT * FROM user WHERE user_hp=#{user_hp} AND user_email=#{user_email}  
	</select>
	
	<update id="updateTempPwd" parameterType="com.plant.user.UserVO">
		UPDATE user SET user_pwd = #{user_pwd} WHERE user_hp=#{user_hp} AND user_email = #{user_email}
	</update>
</mapper>